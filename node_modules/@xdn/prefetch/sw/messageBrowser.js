"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Sends a message to the last focused browser window.
 * @param message
 */
function messageBrowser(message, _a) {
    var _b = (_a === void 0 ? {} : _a).broadcast, broadcast = _b === void 0 ? false : _b;
    // @ts-ignore
    return self.clients.matchAll({ type: 'window' }).then(function (clients) {
        var targetClients = clients;
        if (!broadcast && clients.length) {
            // clients array is ordered by last focused
            targetClients = [clients[0]];
        }
        targetClients.forEach(function (client) { return client.postMessage(message); });
    });
}
exports.default = messageBrowser;
