"use strict";

const {
  parse
} = require('querystring');

const toMultiValueHeaders = require('./toMultiValueHeaders');
/**
 * Converts an IncomingMessage to an AWS lambda event.
 * @param request
 */


module.exports = function toLambdaEvent(request) {
  const [path, search] = request.url.split(/\?/);
  const query = parse(search);
  return {
    path,
    multiValueQueryStringParameters: query,
    httpMethod: request.method,
    body: request.body,
    multiValueHeaders: toMultiValueHeaders(request.headers)
  };
};